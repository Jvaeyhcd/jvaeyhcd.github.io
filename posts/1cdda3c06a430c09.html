


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>RXSwiftåŸºç¡€ [ Jvaeyhcd&#39;s Note ]</title>
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  
    <!-- stylesheets list from _config.yml -->
    
      <link rel="stylesheet" href="/css/dexo.css">
    
      <link rel="stylesheet" href="/css/custom.css">
    
      <link rel="stylesheet" href="/css/post.css">
    
      <link rel="stylesheet" href="/css/page.css">
    
      <link rel="stylesheet" href="/css/layout.css">
    
      <link rel="stylesheet" href="/css/font-awesome.min.css">
    
  
<meta name="generator" content="Hexo 5.4.2"></head>
<body>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<div class="layout-container">
  <div class="layout-header">
    

<div class="main-nav">
  
  <div class="container">
    <header class="group top-nav">
      <nav class="navbar logo-w navbar-left">
        <a href="/" class="logo">Jvaeyhcd's Note</a>
      </nav>
      <div class="navigation-toggle" onClick="hideShowMenu()">
        <span class="logo">Jvaeyhcd's Note</span>
      </div>
      <nav id="navbar-menu" class="navbar item-nav navbar-right">
        <ul>
          
            <li><a href="/">Home</a></li>
          
            <li><a href="/archives">Archives</a></li>
          
            <li><a href="/tag">Tags</a></li>
          
            <li><a target="_blank" rel="noopener" href="https://github.com/Jvaeyhcd">Github</a></li>
          
        </ul>
      </nav>
    </header>
  </div>
</div>
  </div>
  <div class="layout-content">
    <div id="content-outer" class="container container-box">
      <div id="content-inner" class="content-view">
        <div class="post-content-box">
  <article id="post" class="post-detail-box box-section shadow">
    <div class="post-title">
      RXSwiftåŸºç¡€
    </div>
    <div class="post-base-box">
      <time datetime="2016-06-08T01:32:44.000Z">
        Posted on 2016-06-08
      </time>
      
        <div class="category-item">
          In
          <a class="category-link-grey-link" href="/categories/%E7%9F%A5%E8%AF%86%E7%A7%AF%E7%B4%AF/">çŸ¥è¯†ç§¯ç´¯</a>
        </div>
      
      <span id="busuanzi_container_page_pv">
        &nbsp;visitors <span id="busuanzi_value_page_pv"></span>
      </span>
    </div>
    <div class="post-body">
      <h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>ä¸€ä¸ªè§‚å¯Ÿè€…(Observer)è®¢é˜…ä¸€ä¸ªå¯è§‚å¯Ÿåºåˆ—(Observable)ã€‚è§‚å¯Ÿè€…å¯¹Observableå‘å°„çš„æ•°æ®æˆ–æ•°æ®åºåˆ—ä½œå‡ºå“åº”</p>
<h2 id="ä¸ºä»€ä¹ˆå‘ç”¨RxSwift"><a href="#ä¸ºä»€ä¹ˆå‘ç”¨RxSwift" class="headerlink" title="ä¸ºä»€ä¹ˆå‘ç”¨RxSwift"></a>ä¸ºä»€ä¹ˆå‘ç”¨RxSwift</h2><p>ä¸€ä¸ªç¨‹åºé€šå¸¸åŒ…å«ç€å¤§é‡çš„å„ç§äº‹ä»¶çš„äº§ç”Ÿä»¥åŠå¯¹åº”çš„å¤„ç†é€»è¾‘ï¼Œå„ç§å“åº”æ–¹æ³•ä½¿ä»£ç æ›´åŠ çš„æ··ä¹±å’Œå¤æ‚ï¼Œè€ŒRxSwiftæ˜¯ä¸€ä¸ªç»Ÿä¸€çš„å¤„ç†å„ç§å“åº”äº‹ä»¶çš„æ–¹å¼</p>
<ul>
<li>Observableçš„åˆ›å»ºå’Œè®¢é˜…</li>
<li>Subjectsçš„ä½¿ç”¨</li>
<li>Combinationï¼šObservableçš„æ··åˆæ“ä½œ</li>
<li>Transformingï¼šObservableçš„è½¬æ¢æ“ä½œ</li>
<li>Filteringï¼šObservableæ¶ˆæ¯å…ƒç´ çš„è¿‡æ»¤æ“ä½œ</li>
<li>å¯¹Observableå…ƒç´ åšè¿ç®—æ“ä½œ</li>
<li>Connectableæ“ä½œ</li>
<li>é”™è¯¯å¤„ç†</li>
<li>debug</li>
</ul>
<span id="more"></span>

<h2 id="æ¶ˆæ¯çš„è®¢é˜…æ–¹å¼"><a href="#æ¶ˆæ¯çš„è®¢é˜…æ–¹å¼" class="headerlink" title="æ¶ˆæ¯çš„è®¢é˜…æ–¹å¼"></a>æ¶ˆæ¯çš„è®¢é˜…æ–¹å¼</h2><p>è¿™äº›éƒ½æ˜¯Observableçš„æ–¹æ³•ï¼Œå‚æ•°éƒ½æ˜¯é—­åŒ…ï¼Œé—­åŒ…æ˜¯è§‚å¯Ÿè€…</p>
<ol>
<li>subscribe(on:(Event) -&gt; void)ï¼šè®¢é˜…æ‰€æœ‰æ¶ˆæ¯(Next, Error, and Completed)</li>
<li>subscribeNext((Element) -&gt; void)ï¼šåªè®¢é˜…Next</li>
<li>subscribeError((ErrorType) -&gt; void)ï¼šåªè®¢é˜…Error</li>
<li>subscribeCompleted(() -&gt; Void)ï¼šåªè®¢é˜…Completed</li>
<li>subscribe(onNext:(Element) -&gt; void, onError:(ErrorType) -&gt; void, onCompleted:() -&gt; Void, onDisposed:() -&gt; Void)è®¢é˜…å¤šä¸ªæ¶ˆæ¯</li>
</ol>
<h2 id="é‡Šæ”¾åˆ†é…çš„èµ„æº"><a href="#é‡Šæ”¾åˆ†é…çš„èµ„æº" class="headerlink" title="é‡Šæ”¾åˆ†é…çš„èµ„æº"></a>é‡Šæ”¾åˆ†é…çš„èµ„æº</h2><p>è®¢é˜…è€…å¯ä»¥é€šè¿‡è°ƒç”¨.dispose()æ¥é‡Šæ”¾åˆ†é…çš„èµ„æºï¼Œä½†é€šè¿‡DisposeBagæ¥ç®¡ç†æˆ–è€…é€šè¿‡takeUntilæ¥è‡ªåŠ¨é‡Šæ”¾æ›´å¥½</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line">subscription.addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p>æˆ–</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sequence</span><br><span class="line">    .takeUntil(<span class="keyword">self</span>.rx_deallocated)</span><br><span class="line">    .subscribe &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="variable">$0</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="Observableçš„åˆ›å»ºå’Œè®¢é˜…"><a href="#Observableçš„åˆ›å»ºå’Œè®¢é˜…" class="headerlink" title="Observableçš„åˆ›å»ºå’Œè®¢é˜…"></a>Observableçš„åˆ›å»ºå’Œè®¢é˜…</h2><p>Observableåºåˆ—åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<ul>
<li>å†·ï¼šåªæœ‰å½“æœ‰è§‚å¯Ÿè€…è®¢é˜…è¿™ä¸ªåºåˆ—æ—¶ï¼Œåºåˆ—æ‰å‘å°„å€¼</li>
<li>çƒ­ï¼šåºåˆ—åˆ›å»ºæ—¶å°±å¼€å§‹å‘å°„å€¼</li>
</ul>
<h3 id="never-åˆ›å»ºå³ä¸ä¼šå®Œæˆä¹Ÿä¸ä¼šå‘æ¶ˆæ¯çš„Observable"><a href="#never-åˆ›å»ºå³ä¸ä¼šå®Œæˆä¹Ÿä¸ä¼šå‘æ¶ˆæ¯çš„Observable" class="headerlink" title="never()åˆ›å»ºå³ä¸ä¼šå®Œæˆä¹Ÿä¸ä¼šå‘æ¶ˆæ¯çš„Observable"></a>never()åˆ›å»ºå³ä¸ä¼šå®Œæˆä¹Ÿä¸ä¼šå‘æ¶ˆæ¯çš„Observable</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"><span class="keyword">let</span> neverSequence <span class="operator">=</span> <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.never()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> neverSequenceSubscription <span class="operator">=</span> neverSequence</span><br><span class="line">        .subscribe &#123; <span class="keyword">_</span> <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;This will never be printed&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">neverSequenceSubscription.addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<img src='./never.png' width=400/>

<h3 id="empty-åˆ›å»ºåªä¼šå‘é€ä¸€æ¬¡å®Œæˆæ¶ˆæ¯çš„Observable"><a href="#empty-åˆ›å»ºåªä¼šå‘é€ä¸€æ¬¡å®Œæˆæ¶ˆæ¯çš„Observable" class="headerlink" title="empty()åˆ›å»ºåªä¼šå‘é€ä¸€æ¬¡å®Œæˆæ¶ˆæ¯çš„Observable"></a>empty()åˆ›å»ºåªä¼šå‘é€ä¸€æ¬¡å®Œæˆæ¶ˆæ¯çš„Observable</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.empty()</span><br><span class="line">        .subscribe &#123; event <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">print</span>(event)</span><br><span class="line">        &#125;</span><br><span class="line">        .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>Completed</p>
<img src='./empty.png' width=400>

<h3 id="just-åˆ›å»ºåªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„Observableï¼Œåœ¨å‘é€ä¸€æ¬¡Nextæ¶ˆæ¯åä¾¿å‘é€Completedæ¶ˆæ¯"><a href="#just-åˆ›å»ºåªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„Observableï¼Œåœ¨å‘é€ä¸€æ¬¡Nextæ¶ˆæ¯åä¾¿å‘é€Completedæ¶ˆæ¯" class="headerlink" title="just()åˆ›å»ºåªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„Observableï¼Œåœ¨å‘é€ä¸€æ¬¡Nextæ¶ˆæ¯åä¾¿å‘é€Completedæ¶ˆæ¯"></a>just()åˆ›å»ºåªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„Observableï¼Œåœ¨å‘é€ä¸€æ¬¡Nextæ¶ˆæ¯åä¾¿å‘é€Completedæ¶ˆæ¯</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.just(<span class="string">&quot;ğŸ”´&quot;</span>)</span><br><span class="line">    .subscribe &#123; event <span class="keyword">in</span></span><br><span class="line">        <span class="built_in">print</span>(event)</span><br><span class="line">    &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)        </span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨ï¼šå¦‚æœä¼ é€’nullç»™justï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªå‘é€nullæ¶ˆæ¯çš„Observableï¼Œä¸è¦ä¼ å…¥é”™è¯¯çš„å‚æ•°ï¼Œå¦åˆ™å°†ä¼šå¾—åˆ°ä¸€ä¸ªç©ºçš„Observable</p>
</blockquote>
<p><code>output:</code><br>Next(ğŸ”´)<br>Completed<br><br/><br><img src='./just.png' width=400></p>
<h3 id="of-åˆ›å»ºå¯ä»¥åŒ…å«ä»»æ„ä¸ªå…ƒç´ çš„Observableï¼Œè¿ç»­ç›¸åŒçš„å…ƒç´ ä¼šè¢«å¿½ç•¥"><a href="#of-åˆ›å»ºå¯ä»¥åŒ…å«ä»»æ„ä¸ªå…ƒç´ çš„Observableï¼Œè¿ç»­ç›¸åŒçš„å…ƒç´ ä¼šè¢«å¿½ç•¥" class="headerlink" title="of()åˆ›å»ºå¯ä»¥åŒ…å«ä»»æ„ä¸ªå…ƒç´ çš„Observableï¼Œè¿ç»­ç›¸åŒçš„å…ƒç´ ä¼šè¢«å¿½ç•¥"></a>of()åˆ›å»ºå¯ä»¥åŒ…å«ä»»æ„ä¸ªå…ƒç´ çš„Observableï¼Œè¿ç»­ç›¸åŒçš„å…ƒç´ ä¼šè¢«å¿½ç•¥</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.of(<span class="string">&quot;ğŸ¶&quot;</span>, <span class="string">&quot;ğŸ±&quot;</span>, <span class="string">&quot;ğŸ­&quot;</span>, <span class="string">&quot;ğŸ¹&quot;</span>)</span><br><span class="line">       .subscribeNext &#123; element <span class="keyword">in</span></span><br><span class="line">           <span class="built_in">print</span>(element)</span><br><span class="line">       &#125;</span><br><span class="line">       .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>ğŸ¶<br>ğŸ±<br>ğŸ­<br>ğŸ¹</p>
<h3 id="create-å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„Observableï¼Œåœ¨æœ€åŸå§‹çš„ObservableåŸºç¡€ä¸Šåˆ›å»ºObservable"><a href="#create-å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„Observableï¼Œåœ¨æœ€åŸå§‹çš„ObservableåŸºç¡€ä¸Šåˆ›å»ºObservable" class="headerlink" title="create()å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„Observableï¼Œåœ¨æœ€åŸå§‹çš„ObservableåŸºç¡€ä¸Šåˆ›å»ºObservable"></a>create()å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„Observableï¼Œåœ¨æœ€åŸå§‹çš„ObservableåŸºç¡€ä¸Šåˆ›å»ºObservable</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myJust <span class="operator">=</span> &#123; (element: <span class="type">String</span>) -&gt; <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">return</span> <span class="type">Observable</span>.create &#123; observer <span class="keyword">in</span></span><br><span class="line">            observer.on(.<span class="type">Next</span>(element))</span><br><span class="line">            observer.on(.<span class="type">Completed</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="type">NopDisposable</span>.instance</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> myJust(<span class="string">&quot;ğŸ”´&quot;</span>)</span><br><span class="line">    .subscribe &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>Next(ğŸ”´)<br>Completed<br><br/><br><img src='./create.png' width=400><br><br/></p>
<h3 id="range-åˆ›å»ºä¸€ä¸ªå‘é€ä¸€ä¸ªèŒƒå›´çš„æ•´æ•°çš„Observableï¼Œå‘é€å®Œåå‘é€Completed"><a href="#range-åˆ›å»ºä¸€ä¸ªå‘é€ä¸€ä¸ªèŒƒå›´çš„æ•´æ•°çš„Observableï¼Œå‘é€å®Œåå‘é€Completed" class="headerlink" title="range()åˆ›å»ºä¸€ä¸ªå‘é€ä¸€ä¸ªèŒƒå›´çš„æ•´æ•°çš„Observableï¼Œå‘é€å®Œåå‘é€Completed"></a>range()åˆ›å»ºä¸€ä¸ªå‘é€ä¸€ä¸ªèŒƒå›´çš„æ•´æ•°çš„Observableï¼Œå‘é€å®Œåå‘é€Completed</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.range(start: <span class="number">1</span>, count: <span class="number">10</span>)</span><br><span class="line">        .subscribe &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">        .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>Next(1)<br>Next(2)<br>Next(3)<br>Next(4)<br>Next(5)<br>Next(6)<br>Next(7)<br>Next(8)<br>Next(9)<br>Next(10)<br>Completed</p>
<h3 id="repeatElement-åˆ›å»ºä¸€ä¸ªå¯ä»¥é‡å¤å‘é€æ¶ˆæ¯çš„Observableï¼Œå¯ä»¥æŒ‡å®šé‡å¤çš„æ¬¡æ•°ï¼ŒæœªæŒ‡å®šå³æ— é™å‘é€"><a href="#repeatElement-åˆ›å»ºä¸€ä¸ªå¯ä»¥é‡å¤å‘é€æ¶ˆæ¯çš„Observableï¼Œå¯ä»¥æŒ‡å®šé‡å¤çš„æ¬¡æ•°ï¼ŒæœªæŒ‡å®šå³æ— é™å‘é€" class="headerlink" title="repeatElement()åˆ›å»ºä¸€ä¸ªå¯ä»¥é‡å¤å‘é€æ¶ˆæ¯çš„Observableï¼Œå¯ä»¥æŒ‡å®šé‡å¤çš„æ¬¡æ•°ï¼ŒæœªæŒ‡å®šå³æ— é™å‘é€"></a>repeatElement()åˆ›å»ºä¸€ä¸ªå¯ä»¥é‡å¤å‘é€æ¶ˆæ¯çš„Observableï¼Œå¯ä»¥æŒ‡å®šé‡å¤çš„æ¬¡æ•°ï¼ŒæœªæŒ‡å®šå³æ— é™å‘é€</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.repeatElement(<span class="string">&quot;ğŸ”´&quot;</span>)</span><br><span class="line">        .take(<span class="number">3</span>)</span><br><span class="line">        .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">        .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>ğŸ”´<br>ğŸ”´<br>ğŸ”´</p>
<blockquote>
<p>æ³¨ï¼štakeå¯ä»¥ç”¨äºæ‰€æœ‰ObservableæŒ‡å®šé™åˆ¶å…ƒç´ ä¸ªæ•°</p>
</blockquote>
<h3 id="generate-åˆ›å»ºä¸€ä¸ªå¯ä»¥æŒ‡å®šè§„åˆ™çš„Observableï¼Œä¼šå‘é€æ‰€æœ‰æ»¡è¶³è§„åˆ™çš„å…ƒç´ "><a href="#generate-åˆ›å»ºä¸€ä¸ªå¯ä»¥æŒ‡å®šè§„åˆ™çš„Observableï¼Œä¼šå‘é€æ‰€æœ‰æ»¡è¶³è§„åˆ™çš„å…ƒç´ " class="headerlink" title="generate()åˆ›å»ºä¸€ä¸ªå¯ä»¥æŒ‡å®šè§„åˆ™çš„Observableï¼Œä¼šå‘é€æ‰€æœ‰æ»¡è¶³è§„åˆ™çš„å…ƒç´ "></a>generate()åˆ›å»ºä¸€ä¸ªå¯ä»¥æŒ‡å®šè§„åˆ™çš„Observableï¼Œä¼šå‘é€æ‰€æœ‰æ»¡è¶³è§„åˆ™çš„å…ƒç´ </h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"> <span class="type">Observable</span>.generate(</span><br><span class="line">            initialState: <span class="number">0</span>,</span><br><span class="line">            condition: &#123; <span class="variable">$0</span> <span class="operator">&lt;</span> <span class="number">3</span> &#125;,</span><br><span class="line">            iterate: &#123; <span class="variable">$0</span> <span class="operator">+</span> <span class="number">1</span> &#125;</span><br><span class="line">        )</span><br><span class="line">        .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">        .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><strong>iterateï¼šæ¯æ¬¡conditionä¹‹åéƒ½ä¼šå¯¹å½“å‰å€¼åšä¸€æ¬¡ç›¸åº”è¿­ä»£è¿ç®—</strong></p>
<p><code>output:</code><br/><br>0<br>1<br>2</p>
<h3 id="deferred-åºåˆ—ä¸ºæ¯ä¸€ä¸ªè®¢é˜…è€…åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„Observable"><a href="#deferred-åºåˆ—ä¸ºæ¯ä¸€ä¸ªè®¢é˜…è€…åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„Observable" class="headerlink" title="deferred()åºåˆ—ä¸ºæ¯ä¸€ä¸ªè®¢é˜…è€…åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„Observable"></a>deferred()åºåˆ—ä¸ºæ¯ä¸€ä¸ªè®¢é˜…è€…åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„Observable</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"><span class="keyword">var</span> count <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> deferredSequence <span class="operator">=</span> <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.deferred &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Creating <span class="subst">\(count)</span>&quot;</span>)</span><br><span class="line">        count <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="type">Observable</span>.create &#123; observer <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Emitting...&quot;</span>)</span><br><span class="line">            observer.onNext(<span class="string">&quot;ğŸ¶&quot;</span>)</span><br><span class="line">            observer.onNext(<span class="string">&quot;ğŸ±&quot;</span>)</span><br><span class="line">            observer.onNext(<span class="string">&quot;ğŸµ&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="type">NopDisposable</span>.instance</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">deferredSequence</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br><span class="line"></span><br><span class="line">deferredSequence</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨ï¼šdeferredåºåˆ—åªæœ‰åœ¨ä¸€ä¸ªè§‚å¯Ÿè€…è®¢é˜…å®ƒçš„æ—¶å€™æ‰æ‰§è¡Œå®ƒçš„åˆ›å»ºObservableæ–¹æ³•ï¼Œäº§ç”Ÿä¸€ä¸ªå…¨æ–°çš„Observable**</p>
</blockquote>
<p><code>output:</code><br>Creating 1<br>Emittingâ€¦<br>ğŸ¶<br>ğŸ±<br>ğŸµ<br>Creating 2<br>Emittingâ€¦<br>ğŸ¶<br>ğŸ±<br>ğŸµ<br><img src='./deferred.png' width=400><br><br/></p>
<h3 id="error-åˆ›å»ºä¸€ä¸ªä¸å‘é€å…ƒç´ çš„Observableï¼Œç„¶åç«‹å³å‘é€errorå¹¶ç»ˆæ­¢"><a href="#error-åˆ›å»ºä¸€ä¸ªä¸å‘é€å…ƒç´ çš„Observableï¼Œç„¶åç«‹å³å‘é€errorå¹¶ç»ˆæ­¢" class="headerlink" title="error()åˆ›å»ºä¸€ä¸ªä¸å‘é€å…ƒç´ çš„Observableï¼Œç„¶åç«‹å³å‘é€errorå¹¶ç»ˆæ­¢"></a>error()åˆ›å»ºä¸€ä¸ªä¸å‘é€å…ƒç´ çš„Observableï¼Œç„¶åç«‹å³å‘é€errorå¹¶ç»ˆæ­¢</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.error(<span class="type">Error</span>.<span class="type">Test</span>)</span><br><span class="line">        .subscribe &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">        .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>Error(Test)</p>
<h3 id="doOn-åœ¨å‘é€å…ƒç´ æ¶ˆæ¯å‰å¯¹æ¯ä¸€ä¸ªå…ƒç´ åšæŒ‡å®šçš„æ“ä½œï¼Œç„¶åè¿”å›æ“ä½œå‰çš„å…ƒç´ æ¶ˆæ¯"><a href="#doOn-åœ¨å‘é€å…ƒç´ æ¶ˆæ¯å‰å¯¹æ¯ä¸€ä¸ªå…ƒç´ åšæŒ‡å®šçš„æ“ä½œï¼Œç„¶åè¿”å›æ“ä½œå‰çš„å…ƒç´ æ¶ˆæ¯" class="headerlink" title="doOn()åœ¨å‘é€å…ƒç´ æ¶ˆæ¯å‰å¯¹æ¯ä¸€ä¸ªå…ƒç´ åšæŒ‡å®šçš„æ“ä½œï¼Œç„¶åè¿”å›æ“ä½œå‰çš„å…ƒç´ æ¶ˆæ¯"></a>doOn()åœ¨å‘é€å…ƒç´ æ¶ˆæ¯å‰å¯¹æ¯ä¸€ä¸ªå…ƒç´ åšæŒ‡å®šçš„æ“ä½œï¼Œç„¶åè¿”å›æ“ä½œå‰çš„å…ƒç´ æ¶ˆæ¯</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.of(<span class="string">&quot;ğŸ&quot;</span>, <span class="string">&quot;ğŸ&quot;</span>, <span class="string">&quot;ğŸŠ&quot;</span>, <span class="string">&quot;ğŸ‹&quot;</span>)</span><br><span class="line">        .doOn &#123; <span class="built_in">print</span>(<span class="string">&quot;Intercepted:&quot;</span>, <span class="variable">$0</span>) &#125;</span><br><span class="line">        .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">        .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨ï¼š doOn(onNext:onError:onCompleted:)ä¸ºä¸åŒè®¢é˜…æ–¹å¼åˆ†åˆ«æŒ‡å®š</p>
</blockquote>
<p><code>output:</code><br>Intercepted: Next(ğŸ)<br>ğŸ<br>Intercepted: Next(ğŸ)<br>ğŸ<br>Intercepted: Next(ğŸŠ)<br>ğŸŠ<br>Intercepted: Next(ğŸ‹)<br>ğŸ‹<br>Intercepted: Completed</p>
<img src='./doOn.png' width=400>
<br/>

<h3 id="toObservable-é€šè¿‡Array-Dictionary-æˆ–Setç­‰SequenceTypeåˆ›å»ºä¸€ä¸ªObservable"><a href="#toObservable-é€šè¿‡Array-Dictionary-æˆ–Setç­‰SequenceTypeåˆ›å»ºä¸€ä¸ªObservable" class="headerlink" title="toObservable()é€šè¿‡Array,Dictionary,æˆ–Setç­‰SequenceTypeåˆ›å»ºä¸€ä¸ªObservable"></a>toObservable()é€šè¿‡Array,Dictionary,æˆ–Setç­‰SequenceTypeåˆ›å»ºä¸€ä¸ªObservable</h3><br/>
## Subjectsçš„ä½¿ç”¨

<p>Subjectsç†è§£ä¸ºobserverå’ŒObservableä¹‹é—´çš„æ¡¥æ¢æˆ–ä»£ç†ï¼Œå³æ‰®æ¼”ç€observeråˆæ‰®æ¼”ç€Observableï¼Œè§„å®šäº†æ·»åŠ çš„observerå¦‚ä½•æ¥æ”¶æ¶ˆæ¯</p>
<h3 id="PublishSubjectå‘æ‰€æœ‰è®¢é˜…è€…å¹¿æ’­ä»è®¢é˜…ä¹‹åçš„äº‹ä»¶"><a href="#PublishSubjectå‘æ‰€æœ‰è®¢é˜…è€…å¹¿æ’­ä»è®¢é˜…ä¹‹åçš„äº‹ä»¶" class="headerlink" title="PublishSubjectå‘æ‰€æœ‰è®¢é˜…è€…å¹¿æ’­ä»è®¢é˜…ä¹‹åçš„äº‹ä»¶"></a>PublishSubjectå‘æ‰€æœ‰è®¢é˜…è€…å¹¿æ’­ä»è®¢é˜…ä¹‹åçš„äº‹ä»¶</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"><span class="keyword">let</span> subject <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"></span><br><span class="line">subject.addObserver(<span class="string">&quot;1&quot;</span>).addDisposableTo(disposeBag)</span><br><span class="line">subject.onNext(<span class="string">&quot;ğŸ¶&quot;</span>)</span><br><span class="line">subject.onNext(<span class="string">&quot;ğŸ±&quot;</span>)</span><br><span class="line"></span><br><span class="line">subject.addObserver(<span class="string">&quot;2&quot;</span>).addDisposableTo(disposeBag)</span><br><span class="line">subject.onNext(<span class="string">&quot;ğŸ…°ï¸&quot;</span>)</span><br><span class="line">subject.onNext(<span class="string">&quot;ğŸ…±ï¸&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>Subscription: 1 Event: Next(ğŸ¶)<br>Subscription: 1 Event: Next(ğŸ±)<br>Subscription: 1 Event: Next(ğŸ…°ï¸)<br>Subscription: 2 Event: Next(ğŸ…°ï¸)<br>Subscription: 1 Event: Next(ğŸ…±ï¸)<br>Subscription: 2 Event: Next(ğŸ…±ï¸)</p>
<h3 id="ReplaySubjectæœ‰ä¸€ä¸ªç¼“å­˜æœºåˆ¶ï¼Œå¯ä»¥åœ¨åˆ›å»ºæ—¶é€šè¿‡æŒ‡å®šbufferSizeæŒ‡å®šç¼“å­˜å¤§å°æˆ–è°ƒç”¨bufferæ–¹æ³•æŒ‡å®šæ›´è¯¦ç»†çš„ç¼“å­˜æ¡ä»¶æ¥æŒ‡å®šæ–°æ·»åŠ çš„è®¢é˜…è€…å¯ä»¥æ¥æ”¶å¤šå°‘è®¢é˜…å‰çš„æ¶ˆæ¯"><a href="#ReplaySubjectæœ‰ä¸€ä¸ªç¼“å­˜æœºåˆ¶ï¼Œå¯ä»¥åœ¨åˆ›å»ºæ—¶é€šè¿‡æŒ‡å®šbufferSizeæŒ‡å®šç¼“å­˜å¤§å°æˆ–è°ƒç”¨bufferæ–¹æ³•æŒ‡å®šæ›´è¯¦ç»†çš„ç¼“å­˜æ¡ä»¶æ¥æŒ‡å®šæ–°æ·»åŠ çš„è®¢é˜…è€…å¯ä»¥æ¥æ”¶å¤šå°‘è®¢é˜…å‰çš„æ¶ˆæ¯" class="headerlink" title="ReplaySubjectæœ‰ä¸€ä¸ªç¼“å­˜æœºåˆ¶ï¼Œå¯ä»¥åœ¨åˆ›å»ºæ—¶é€šè¿‡æŒ‡å®šbufferSizeæŒ‡å®šç¼“å­˜å¤§å°æˆ–è°ƒç”¨bufferæ–¹æ³•æŒ‡å®šæ›´è¯¦ç»†çš„ç¼“å­˜æ¡ä»¶æ¥æŒ‡å®šæ–°æ·»åŠ çš„è®¢é˜…è€…å¯ä»¥æ¥æ”¶å¤šå°‘è®¢é˜…å‰çš„æ¶ˆæ¯"></a>ReplaySubjectæœ‰ä¸€ä¸ªç¼“å­˜æœºåˆ¶ï¼Œå¯ä»¥åœ¨åˆ›å»ºæ—¶é€šè¿‡æŒ‡å®šbufferSizeæŒ‡å®šç¼“å­˜å¤§å°æˆ–è°ƒç”¨bufferæ–¹æ³•æŒ‡å®šæ›´è¯¦ç»†çš„ç¼“å­˜æ¡ä»¶æ¥æŒ‡å®šæ–°æ·»åŠ çš„è®¢é˜…è€…å¯ä»¥æ¥æ”¶å¤šå°‘è®¢é˜…å‰çš„æ¶ˆæ¯</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"><span class="keyword">let</span> subject <span class="operator">=</span> <span class="type">ReplaySubject</span>&lt;<span class="type">String</span>&gt;.create(bufferSize: <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">subject.addObserver(<span class="string">&quot;1&quot;</span>).addDisposableTo(disposeBag)</span><br><span class="line">subject.onNext(<span class="string">&quot;ğŸ¶&quot;</span>)</span><br><span class="line">subject.onNext(<span class="string">&quot;ğŸ±&quot;</span>)</span><br><span class="line"></span><br><span class="line">subject.addObserver(<span class="string">&quot;2&quot;</span>).addDisposableTo(disposeBag)</span><br><span class="line">subject.onNext(<span class="string">&quot;ğŸ…°ï¸&quot;</span>)</span><br><span class="line">subject.onNext(<span class="string">&quot;ğŸ…±ï¸&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>Subscription: 1 Event: Next(ğŸ¶)<br>Subscription: 1 Event: Next(ğŸ±)<br>Subscription: 2 Event: Next(ğŸ±)<br>Subscription: 1 Event: Next(ğŸ…°ï¸)<br>Subscription: 2 Event: Next(ğŸ…°ï¸)<br>Subscription: 1 Event: Next(ğŸ…±ï¸)<br>Subscription: 2 Event: Next(ğŸ…±ï¸)</p>
<h3 id="BehaviorSubjectå‘æ–°çš„è®¢é˜…è€…å‘é€ä¸€æ¡æœ€è¿‘çš„äº‹ä»¶ï¼Œå¦‚æœæ²¡æœ‰äº‹ä»¶åˆ™å‘é€ä¸€æ¡é»˜è®¤çš„æ¶ˆæ¯"><a href="#BehaviorSubjectå‘æ–°çš„è®¢é˜…è€…å‘é€ä¸€æ¡æœ€è¿‘çš„äº‹ä»¶ï¼Œå¦‚æœæ²¡æœ‰äº‹ä»¶åˆ™å‘é€ä¸€æ¡é»˜è®¤çš„æ¶ˆæ¯" class="headerlink" title="BehaviorSubjectå‘æ–°çš„è®¢é˜…è€…å‘é€ä¸€æ¡æœ€è¿‘çš„äº‹ä»¶ï¼Œå¦‚æœæ²¡æœ‰äº‹ä»¶åˆ™å‘é€ä¸€æ¡é»˜è®¤çš„æ¶ˆæ¯"></a>BehaviorSubjectå‘æ–°çš„è®¢é˜…è€…å‘é€ä¸€æ¡æœ€è¿‘çš„äº‹ä»¶ï¼Œå¦‚æœæ²¡æœ‰äº‹ä»¶åˆ™å‘é€ä¸€æ¡é»˜è®¤çš„æ¶ˆæ¯</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"><span class="keyword">let</span> subject <span class="operator">=</span> <span class="type">BehaviorSubject</span>(value: <span class="string">&quot;ğŸ”´&quot;</span>)</span><br><span class="line"></span><br><span class="line">subject.addObserver(<span class="string">&quot;1&quot;</span>).addDisposableTo(disposeBag)</span><br><span class="line">subject.onNext(<span class="string">&quot;ğŸ¶&quot;</span>)</span><br><span class="line">subject.onNext(<span class="string">&quot;ğŸ±&quot;</span>)</span><br><span class="line"></span><br><span class="line">subject.addObserver(<span class="string">&quot;2&quot;</span>).addDisposableTo(disposeBag)</span><br><span class="line">subject.onNext(<span class="string">&quot;ğŸ…°ï¸&quot;</span>)</span><br><span class="line">subject.onNext(<span class="string">&quot;ğŸ…±ï¸&quot;</span>)</span><br><span class="line"></span><br><span class="line">subject.addObserver(<span class="string">&quot;3&quot;</span>).addDisposableTo(disposeBag)</span><br><span class="line">subject.onNext(<span class="string">&quot;ğŸ&quot;</span>)</span><br><span class="line">subject.onNext(<span class="string">&quot;ğŸŠ&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>noteï¼šä»¥ä¸Šéƒ½ä¸ä¼šè‡ªåŠ¨å‘é€Completedå½“å®ƒä»¬è¢«é‡Šæ”¾çš„æ—¶å€™</strong></p>
<p><code>output:</code><br>Subscription: 1 Event: Next(ğŸ”´)<br>Subscription: 1 Event: Next(ğŸ¶)<br>Subscription: 1 Event: Next(ğŸ±)<br>Subscription: 2 Event: Next(ğŸ±)<br>Subscription: 1 Event: Next(ğŸ…°ï¸)<br>Subscription: 2 Event: Next(ğŸ…°ï¸)<br>Subscription: 1 Event: Next(ğŸ…±ï¸)<br>Subscription: 2 Event: Next(ğŸ…±ï¸)<br>Subscription: 3 Event: Next(ğŸ…±ï¸)<br>Subscription: 1 Event: Next(ğŸ)<br>Subscription: 2 Event: Next(ğŸ)<br>Subscription: 3 Event: Next(ğŸ)<br>Subscription: 1 Event: Next(ğŸŠ)<br>Subscription: 2 Event: Next(ğŸŠ)<br>Subscription: 3 Event: Next(ğŸŠ)</p>
<h3 id="Variableä¸BehaviorSubjectçš„åŒºåˆ«æ˜¯åœ¨å®Œæˆçš„æ—¶å€™å®ƒä¼šè‡ªåŠ¨å‘é€ä¸€æ¡Completedæ¶ˆæ¯å’Œè°ƒç”¨deist"><a href="#Variableä¸BehaviorSubjectçš„åŒºåˆ«æ˜¯åœ¨å®Œæˆçš„æ—¶å€™å®ƒä¼šè‡ªåŠ¨å‘é€ä¸€æ¡Completedæ¶ˆæ¯å’Œè°ƒç”¨deist" class="headerlink" title="Variableä¸BehaviorSubjectçš„åŒºåˆ«æ˜¯åœ¨å®Œæˆçš„æ—¶å€™å®ƒä¼šè‡ªåŠ¨å‘é€ä¸€æ¡Completedæ¶ˆæ¯å’Œè°ƒç”¨deist"></a>Variableä¸BehaviorSubjectçš„åŒºåˆ«æ˜¯åœ¨å®Œæˆçš„æ—¶å€™å®ƒä¼šè‡ªåŠ¨å‘é€ä¸€æ¡Completedæ¶ˆæ¯å’Œè°ƒç”¨deist</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"><span class="keyword">let</span> variable <span class="operator">=</span> <span class="type">Variable</span>(<span class="string">&quot;ğŸ”´&quot;</span>)</span><br><span class="line"></span><br><span class="line">variable.asObservable().addObserver(<span class="string">&quot;1&quot;</span>).addDisposableTo(disposeBag)</span><br><span class="line">variable.value <span class="operator">=</span> <span class="string">&quot;ğŸ¶&quot;</span></span><br><span class="line">variable.value <span class="operator">=</span> <span class="string">&quot;ğŸ±&quot;</span></span><br><span class="line"></span><br><span class="line">variable.asObservable().addObserver(<span class="string">&quot;2&quot;</span>).addDisposableTo(disposeBag)</span><br><span class="line">variable.value <span class="operator">=</span> <span class="string">&quot;ğŸ…°ï¸&quot;</span></span><br><span class="line">variable.value <span class="operator">=</span> <span class="string">&quot;ğŸ…±ï¸&quot;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨:variable.asObservable()å®é™…æ˜¯è·å–variableä¸­çš„BehaviorSubjectã€‚variableä¹Ÿæ²¡æœ‰onNextï¼Œè€Œæ˜¯é€šè¿‡valueæ¥è·å–æˆ–æ·»åŠ å…ƒç´ ï¼Œå®ƒä¼šæ·»åŠ å…ƒç´ åˆ°BehaviorSubject</p>
</blockquote>
<p><code>output:</code><br>Subscription: 1 Event: Next(ğŸ”´)<br>Subscription: 1 Event: Next(ğŸ¶)<br>Subscription: 1 Event: Next(ğŸ±)<br>Subscription: 2 Event: Next(ğŸ±)<br>Subscription: 1 Event: Next(ğŸ…°ï¸)<br>Subscription: 2 Event: Next(ğŸ…°ï¸)<br>Subscription: 1 Event: Next(ğŸ…±ï¸)<br>Subscription: 2 Event: Next(ğŸ…±ï¸)<br>Subscription: 1 Event: Completed<br>Subscription: 2 Event: Completed</p>
<h2 id="Combinationï¼šObservableçš„æ··åˆæ“ä½œ"><a href="#Combinationï¼šObservableçš„æ··åˆæ“ä½œ" class="headerlink" title="Combinationï¼šObservableçš„æ··åˆæ“ä½œ"></a>Combinationï¼šObservableçš„æ··åˆæ“ä½œ</h2><h3 id="startWith-åˆ†ä¸ºåŸObservableå’Œæ–°Observableï¼Œå¹¶ä¸”åœ¨å‘é€åŸObservableå…ƒç´ å‰ä¼šå…ˆå‘é€å®Œæ–°Observableå…ƒç´ ï¼Œæœ‰ç‚¹åƒæ ˆ"><a href="#startWith-åˆ†ä¸ºåŸObservableå’Œæ–°Observableï¼Œå¹¶ä¸”åœ¨å‘é€åŸObservableå…ƒç´ å‰ä¼šå…ˆå‘é€å®Œæ–°Observableå…ƒç´ ï¼Œæœ‰ç‚¹åƒæ ˆ" class="headerlink" title="startWith()åˆ†ä¸ºåŸObservableå’Œæ–°Observableï¼Œå¹¶ä¸”åœ¨å‘é€åŸObservableå…ƒç´ å‰ä¼šå…ˆå‘é€å®Œæ–°Observableå…ƒç´ ï¼Œæœ‰ç‚¹åƒæ ˆ"></a>startWith()åˆ†ä¸ºåŸObservableå’Œæ–°Observableï¼Œå¹¶ä¸”åœ¨å‘é€åŸObservableå…ƒç´ å‰ä¼šå…ˆå‘é€å®Œæ–°Observableå…ƒç´ ï¼Œæœ‰ç‚¹åƒæ ˆ</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"> <span class="type">Observable</span>.of(<span class="string">&quot;ğŸ¶&quot;</span>, <span class="string">&quot;ğŸ±&quot;</span>, <span class="string">&quot;ğŸ­&quot;</span>, <span class="string">&quot;ğŸ¹&quot;</span>)</span><br><span class="line">     .startWith(<span class="string">&quot;1ï¸âƒ£&quot;</span>)</span><br><span class="line">     .startWith(<span class="string">&quot;2ï¸âƒ£&quot;</span>)</span><br><span class="line">     .startWith(<span class="string">&quot;3ï¸âƒ£&quot;</span>, <span class="string">&quot;ğŸ…°ï¸&quot;</span>, <span class="string">&quot;ğŸ…±ï¸&quot;</span>)</span><br><span class="line">     .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">     .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>3ï¸âƒ£<br>ğŸ…°ï¸<br>ğŸ…±ï¸<br>2ï¸âƒ£<br>1ï¸âƒ£<br>ğŸ¶<br>ğŸ±<br>ğŸ­<br>ğŸ¹<br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/startwith.html">http://reactivex.io/documentation/operators/startwith.html</a></p>
<h3 id="merge-æŒ‰é¡ºåºæ··åˆå¤šä¸ªObservableä¸ºä¸€ä¸ªæ–°Observable"><a href="#merge-æŒ‰é¡ºåºæ··åˆå¤šä¸ªObservableä¸ºä¸€ä¸ªæ–°Observable" class="headerlink" title="merge()æŒ‰é¡ºåºæ··åˆå¤šä¸ªObservableä¸ºä¸€ä¸ªæ–°Observable"></a>merge()æŒ‰é¡ºåºæ··åˆå¤šä¸ªObservableä¸ºä¸€ä¸ªæ–°Observable</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> subject1 <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"><span class="keyword">let</span> subject2 <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"><span class="keyword">let</span> subject3 <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.of(subject1, subject2, subject3)</span><br><span class="line">    .merge()</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br><span class="line"></span><br><span class="line">subject1.onNext(<span class="string">&quot;ğŸ…°ï¸&quot;</span>)</span><br><span class="line"></span><br><span class="line">subject1.onNext(<span class="string">&quot;ğŸ…±ï¸&quot;</span>)</span><br><span class="line"></span><br><span class="line">subject2.onNext(<span class="string">&quot;â‘ &quot;</span>)</span><br><span class="line"></span><br><span class="line">subject2.onNext(<span class="string">&quot;â‘¡&quot;</span>)</span><br><span class="line"></span><br><span class="line">subject1.onNext(<span class="string">&quot;ğŸ†&quot;</span>)</span><br><span class="line"></span><br><span class="line">subject3.onNext(<span class="string">&quot;ğŸ±&quot;</span>)</span><br><span class="line"></span><br><span class="line">subject2.onNext(<span class="string">&quot;â‘¢&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>ğŸ…°ï¸<br>ğŸ…±ï¸<br>â‘ <br>â‘¡<br>ğŸ†<br>â‘¢<br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/merge.html">http://reactivex.io/documentation/operators/merge.html</a></p>
<h3 id="zip-ç›¸å½“äºå¹¶æ’çš„å°†å¤šä¸ªObservableåˆå¹¶æˆä¸€ä¸ªæ–°Observable"><a href="#zip-ç›¸å½“äºå¹¶æ’çš„å°†å¤šä¸ªObservableåˆå¹¶æˆä¸€ä¸ªæ–°Observable" class="headerlink" title="zip()ç›¸å½“äºå¹¶æ’çš„å°†å¤šä¸ªObservableåˆå¹¶æˆä¸€ä¸ªæ–°Observable"></a>zip()ç›¸å½“äºå¹¶æ’çš„å°†å¤šä¸ªObservableåˆå¹¶æˆä¸€ä¸ªæ–°Observable</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> stringSubject <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"><span class="keyword">let</span> intSubject <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.zip(stringSubject, intSubject) &#123; stringElement, intElement <span class="keyword">in</span></span><br><span class="line">    <span class="string">&quot;<span class="subst">\(stringElement)</span> <span class="subst">\(intElement)</span>&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br><span class="line"></span><br><span class="line">stringSubject.onNext(<span class="string">&quot;ğŸ…°ï¸&quot;</span>)</span><br><span class="line">stringSubject.onNext(<span class="string">&quot;ğŸ…±ï¸&quot;</span>)</span><br><span class="line"></span><br><span class="line">intSubject.onNext(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">intSubject.onNext(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">stringSubject.onNext(<span class="string">&quot;ğŸ†&quot;</span>)</span><br><span class="line">intSubject.onNext(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>ğŸ…°ï¸ 1<br>ğŸ…±ï¸ 2<br>ğŸ† 3</p>
<p><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/zip.html">http://reactivex.io/documentation/operators/zip.html</a><br></br></p>
<h3 id="combineLatest-æ€»æ˜¯å°†æŸä¸ªObservableå‘å‡ºçš„æœ€æ–°å…ƒç´ ä¸å…¶ä»–Observableçš„æœ€åå‘å‡ºçš„å…ƒç´ æ··åˆ"><a href="#combineLatest-æ€»æ˜¯å°†æŸä¸ªObservableå‘å‡ºçš„æœ€æ–°å…ƒç´ ä¸å…¶ä»–Observableçš„æœ€åå‘å‡ºçš„å…ƒç´ æ··åˆ" class="headerlink" title="combineLatest()æ€»æ˜¯å°†æŸä¸ªObservableå‘å‡ºçš„æœ€æ–°å…ƒç´ ä¸å…¶ä»–Observableçš„æœ€åå‘å‡ºçš„å…ƒç´ æ··åˆ"></a>combineLatest()æ€»æ˜¯å°†æŸä¸ªObservableå‘å‡ºçš„æœ€æ–°å…ƒç´ ä¸å…¶ä»–Observableçš„æœ€åå‘å‡ºçš„å…ƒç´ æ··åˆ</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> stringSubject <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"><span class="keyword">let</span> intSubject <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.combineLatest(stringSubject, intSubject) &#123; stringElement, intElement <span class="keyword">in</span></span><br><span class="line">        <span class="string">&quot;<span class="subst">\(stringElement)</span> <span class="subst">\(intElement)</span>&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br><span class="line"></span><br><span class="line">stringSubject.onNext(<span class="string">&quot;ğŸ…°ï¸&quot;</span>)</span><br><span class="line"></span><br><span class="line">stringSubject.onNext(<span class="string">&quot;ğŸ…±ï¸&quot;</span>)</span><br><span class="line">intSubject.onNext(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">intSubject.onNext(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">stringSubject.onNext(<span class="string">&quot;ğŸ†&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>ğŸ…±ï¸ 1<br>ğŸ…±ï¸ 2<br>ğŸ† 2<br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/combinelatest.html">http://reactivex.io/documentation/operators/combinelatest.html</a></p>
<p>åœ¨æ•°ç»„ä¸Šçš„åº”ç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> stringObservable <span class="operator">=</span> <span class="type">Observable</span>.just(<span class="string">&quot;â¤ï¸&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> fruitObservable <span class="operator">=</span> [<span class="string">&quot;ğŸ&quot;</span>, <span class="string">&quot;ğŸ&quot;</span>, <span class="string">&quot;ğŸŠ&quot;</span>].toObservable()</span><br><span class="line"><span class="keyword">let</span> animalObservable <span class="operator">=</span> <span class="type">Observable</span>.of(<span class="string">&quot;ğŸ¶&quot;</span>, <span class="string">&quot;ğŸ±&quot;</span>, <span class="string">&quot;ğŸ­&quot;</span>, <span class="string">&quot;ğŸ¹&quot;</span>)</span><br><span class="line"></span><br><span class="line">[stringObservable, fruitObservable, animalObservable].combineLatest &#123;</span><br><span class="line">        <span class="string">&quot;<span class="subst">\(<span class="variable">$0</span>[<span class="number">0</span>])</span> <span class="subst">\(<span class="variable">$0</span>[<span class="number">1</span>])</span> <span class="subst">\(<span class="variable">$0</span>[<span class="number">2</span>])</span>&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><strong>noteï¼šæ‰€æœ‰é›†åˆçš„ç±»å‹å¿…é¡»ä¸€æ ·</strong></p>
<p><code>output:</code><br>â¤ï¸ ğŸŠ ğŸ¶<br>â¤ï¸ ğŸŠ ğŸ±<br>â¤ï¸ ğŸŠ ğŸ­<br>â¤ï¸ ğŸŠ ğŸ¹</p>
<h3 id="switchLatest-å¯ä»¥å°†å¤šä¸ªObservableåºåˆ—åˆå¹¶æˆä¸€ä¸ªä¸€ç»´çš„Observableåºåˆ—ï¼Œåªåˆå¹¶å½“å‰å…³æ³¨çš„Observableåºåˆ—æœ€è¿‘çš„æ¶ˆæ¯"><a href="#switchLatest-å¯ä»¥å°†å¤šä¸ªObservableåºåˆ—åˆå¹¶æˆä¸€ä¸ªä¸€ç»´çš„Observableåºåˆ—ï¼Œåªåˆå¹¶å½“å‰å…³æ³¨çš„Observableåºåˆ—æœ€è¿‘çš„æ¶ˆæ¯" class="headerlink" title="switchLatest()å¯ä»¥å°†å¤šä¸ªObservableåºåˆ—åˆå¹¶æˆä¸€ä¸ªä¸€ç»´çš„Observableåºåˆ—ï¼Œåªåˆå¹¶å½“å‰å…³æ³¨çš„Observableåºåˆ—æœ€è¿‘çš„æ¶ˆæ¯"></a>switchLatest()å¯ä»¥å°†å¤šä¸ªObservableåºåˆ—åˆå¹¶æˆä¸€ä¸ªä¸€ç»´çš„Observableåºåˆ—ï¼Œåªåˆå¹¶å½“å‰å…³æ³¨çš„Observableåºåˆ—æœ€è¿‘çš„æ¶ˆæ¯</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> subject1 <span class="operator">=</span> <span class="type">BehaviorSubject</span>(value: <span class="string">&quot;âš½ï¸&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> subject2 <span class="operator">=</span> <span class="type">BehaviorSubject</span>(value: <span class="string">&quot;ğŸ&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> variable <span class="operator">=</span> <span class="type">Variable</span>(subject1)</span><br><span class="line"></span><br><span class="line">variable.asObservable()</span><br><span class="line">    .switchLatest()</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br><span class="line"></span><br><span class="line">subject1.onNext(<span class="string">&quot;ğŸˆ&quot;</span>)</span><br><span class="line">subject1.onNext(<span class="string">&quot;ğŸ€&quot;</span>)</span><br><span class="line"></span><br><span class="line">variable.value <span class="operator">=</span> subject2</span><br><span class="line"></span><br><span class="line">subject1.onNext(<span class="string">&quot;âš¾ï¸&quot;</span>)</span><br><span class="line">subject1.onNext(<span class="string">&quot;ğŸ¾&quot;</span>)</span><br><span class="line"></span><br><span class="line">subject2.onNext(<span class="string">&quot;ğŸ&quot;</span>)</span><br><span class="line"></span><br><span class="line">variable.value <span class="operator">=</span> subject1</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>âš½ï¸<br>ğŸˆ<br>ğŸ€<br>ğŸ<br>ğŸ<br>ğŸ¾<br><strong>noteï¼šâš½ï¸ è¢«å¿½ç•¥</strong><br><br/><br><img src='./switch.png' width=400><br><br/></p>
<h2 id="Transformingï¼šObservableçš„è½¬æ¢æ“ä½œ"><a href="#Transformingï¼šObservableçš„è½¬æ¢æ“ä½œ" class="headerlink" title="Transformingï¼šObservableçš„è½¬æ¢æ“ä½œ"></a>Transformingï¼šObservableçš„è½¬æ¢æ“ä½œ</h2><h3 id="map-å°†é—­åŒ…æ“ä½œåº”ç”¨åˆ°ä¸€ä¸ªè¢«è§‚å¯Ÿåºåˆ—çš„æ‰€æœ‰å…ƒç´ ä¸Šï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„è¢«è§‚å¯Ÿåºåˆ—"><a href="#map-å°†é—­åŒ…æ“ä½œåº”ç”¨åˆ°ä¸€ä¸ªè¢«è§‚å¯Ÿåºåˆ—çš„æ‰€æœ‰å…ƒç´ ä¸Šï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„è¢«è§‚å¯Ÿåºåˆ—" class="headerlink" title="map()å°†é—­åŒ…æ“ä½œåº”ç”¨åˆ°ä¸€ä¸ªè¢«è§‚å¯Ÿåºåˆ—çš„æ‰€æœ‰å…ƒç´ ä¸Šï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„è¢«è§‚å¯Ÿåºåˆ—"></a>map()å°†é—­åŒ…æ“ä½œåº”ç”¨åˆ°ä¸€ä¸ªè¢«è§‚å¯Ÿåºåˆ—çš„æ‰€æœ‰å…ƒç´ ä¸Šï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„è¢«è§‚å¯Ÿåºåˆ—</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"><span class="type">Observable</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    .map &#123; <span class="variable">$0</span> <span class="operator">*</span> <span class="variable">$0</span> &#125;</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>1<br>4<br>9<br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/map.html">http://reactivex.io/documentation/operators/map.html</a></p>
<h3 id="scan-å¯ä»¥è¿­ä»£çš„æ“ä½œï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®ä¸€ä¸ªåˆå§‹çš„è¿­ä»£å€¼"><a href="#scan-å¯ä»¥è¿­ä»£çš„æ“ä½œï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®ä¸€ä¸ªåˆå§‹çš„è¿­ä»£å€¼" class="headerlink" title="scan()å¯ä»¥è¿­ä»£çš„æ“ä½œï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®ä¸€ä¸ªåˆå§‹çš„è¿­ä»£å€¼"></a>scan()å¯ä»¥è¿­ä»£çš„æ“ä½œï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®ä¸€ä¸ªåˆå§‹çš„è¿­ä»£å€¼</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.of(<span class="number">10</span>, <span class="number">100</span>, <span class="number">1000</span>)</span><br><span class="line">    .scan(<span class="number">1</span>) &#123; aggregateValue, newValue <span class="keyword">in</span></span><br><span class="line">        aggregateValue <span class="operator">+</span> newValue</span><br><span class="line">    &#125;</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>11<br>111<br>1111<br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/scan.html">http://reactivex.io/documentation/operators/scan.html</a></p>
<h2 id="Filteringï¼šObservableæ¶ˆæ¯å…ƒç´ çš„è¿‡æ»¤æ“ä½œ"><a href="#Filteringï¼šObservableæ¶ˆæ¯å…ƒç´ çš„è¿‡æ»¤æ“ä½œ" class="headerlink" title="Filteringï¼šObservableæ¶ˆæ¯å…ƒç´ çš„è¿‡æ»¤æ“ä½œ"></a>Filteringï¼šObservableæ¶ˆæ¯å…ƒç´ çš„è¿‡æ»¤æ“ä½œ</h2><h3 id="filter-å‘å‡ºæ»¡è¶³boolæ¡ä»¶çš„å…ƒç´ "><a href="#filter-å‘å‡ºæ»¡è¶³boolæ¡ä»¶çš„å…ƒç´ " class="headerlink" title="filter()å‘å‡ºæ»¡è¶³boolæ¡ä»¶çš„å…ƒç´ "></a>filter()å‘å‡ºæ»¡è¶³boolæ¡ä»¶çš„å…ƒç´ </h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.of(</span><br><span class="line">    <span class="string">&quot;ğŸ±&quot;</span>, <span class="string">&quot;ğŸ°&quot;</span>, <span class="string">&quot;ğŸ¶&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ğŸ¸&quot;</span>, <span class="string">&quot;ğŸ±&quot;</span>, <span class="string">&quot;ğŸ°&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ğŸ¹&quot;</span>, <span class="string">&quot;ğŸ¸&quot;</span>, <span class="string">&quot;ğŸ±&quot;</span>)</span><br><span class="line">    .filter &#123;</span><br><span class="line">        <span class="variable">$0</span> <span class="operator">==</span> <span class="string">&quot;ğŸ±&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>ğŸ±<br>ğŸ±<br>ğŸ±<br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/filter.html">http://reactivex.io/documentation/operators/filter.html</a></p>
<h3 id="distinctUntilChanged-è¿‡æ»¤æ‰è¿ç»­çš„ç›¸åŒå…ƒç´ "><a href="#distinctUntilChanged-è¿‡æ»¤æ‰è¿ç»­çš„ç›¸åŒå…ƒç´ " class="headerlink" title="distinctUntilChanged()è¿‡æ»¤æ‰è¿ç»­çš„ç›¸åŒå…ƒç´ "></a>distinctUntilChanged()è¿‡æ»¤æ‰è¿ç»­çš„ç›¸åŒå…ƒç´ </h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.of(<span class="string">&quot;ğŸ±&quot;</span>, <span class="string">&quot;ğŸ·&quot;</span>, <span class="string">&quot;ğŸ±&quot;</span>, <span class="string">&quot;ğŸ±&quot;</span>, <span class="string">&quot;ğŸ±&quot;</span>, <span class="string">&quot;ğŸµ&quot;</span>, <span class="string">&quot;ğŸ±&quot;</span>)</span><br><span class="line">    .distinctUntilChanged()</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>ğŸ±<br>ğŸ·<br>ğŸ±<br>ğŸµ<br>ğŸ±<br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/distinct.html">http://reactivex.io/documentation/operators/distinct.html</a></p>
<h3 id="elementAt-åªå‘é€æŒ‡å®šä¸‹æ ‡çš„å…ƒç´ "><a href="#elementAt-åªå‘é€æŒ‡å®šä¸‹æ ‡çš„å…ƒç´ " class="headerlink" title="elementAt()åªå‘é€æŒ‡å®šä¸‹æ ‡çš„å…ƒç´ "></a>elementAt()åªå‘é€æŒ‡å®šä¸‹æ ‡çš„å…ƒç´ </h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.of(<span class="string">&quot;ğŸ±&quot;</span>, <span class="string">&quot;ğŸ°&quot;</span>, <span class="string">&quot;ğŸ¶&quot;</span>, <span class="string">&quot;ğŸ¸&quot;</span>, <span class="string">&quot;ğŸ·&quot;</span>, <span class="string">&quot;ğŸµ&quot;</span>)</span><br><span class="line">    .elementAt(<span class="number">3</span>)</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>ğŸ¸<br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/elementat.html">http://reactivex.io/documentation/operators/elementat.html</a></p>
<h3 id="single-ä¸ä¼ å‚æ•°åˆ™å‘é€Observableçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦åˆ™ä¸ºæ»¡è¶³æ¡ä»¶è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰å‘é€ä¸€ä¸ªç¡®åˆ‡çš„å…ƒç´ ï¼Œå°†å‘é€ä¸€ä¸ª-Erroræ¶ˆæ¯"><a href="#single-ä¸ä¼ å‚æ•°åˆ™å‘é€Observableçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦åˆ™ä¸ºæ»¡è¶³æ¡ä»¶è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰å‘é€ä¸€ä¸ªç¡®åˆ‡çš„å…ƒç´ ï¼Œå°†å‘é€ä¸€ä¸ª-Erroræ¶ˆæ¯" class="headerlink" title="single()ä¸ä¼ å‚æ•°åˆ™å‘é€Observableçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦åˆ™ä¸ºæ»¡è¶³æ¡ä»¶è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰å‘é€ä¸€ä¸ªç¡®åˆ‡çš„å…ƒç´ ï¼Œå°†å‘é€ä¸€ä¸ª Erroræ¶ˆæ¯"></a>single()ä¸ä¼ å‚æ•°åˆ™å‘é€Observableçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦åˆ™ä¸ºæ»¡è¶³æ¡ä»¶è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰å‘é€ä¸€ä¸ªç¡®åˆ‡çš„å…ƒç´ ï¼Œå°†å‘é€ä¸€ä¸ª Erroræ¶ˆæ¯</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.of(<span class="string">&quot;ğŸ±&quot;</span>, <span class="string">&quot;ğŸ°&quot;</span>, <span class="string">&quot;ğŸ¶&quot;</span>, <span class="string">&quot;ğŸ¸&quot;</span>, <span class="string">&quot;ğŸ·&quot;</span>, <span class="string">&quot;ğŸµ&quot;</span>)</span><br><span class="line">    .single&#123; <span class="variable">$0</span> <span class="operator">&lt;=</span> <span class="number">6</span>&#125;<span class="comment">//å¦‚æœæ˜¯==è¿™ç§ç¡®åˆ‡çš„åˆ¤æ–­ï¼Œå°†æ²¡æœ‰Erroræ¶ˆæ¯è€Œæ˜¯Completedæ¶ˆæ¯</span></span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>Next(1)<br>Error(Sequence contains more than one element.)</p>
<h3 id="take-ä»…å‘é€ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹æŒ‡å®šä¸ªæ•°çš„å…ƒç´ "><a href="#take-ä»…å‘é€ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹æŒ‡å®šä¸ªæ•°çš„å…ƒç´ " class="headerlink" title="take()ä»…å‘é€ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹æŒ‡å®šä¸ªæ•°çš„å…ƒç´ "></a>take()ä»…å‘é€ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹æŒ‡å®šä¸ªæ•°çš„å…ƒç´ </h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.of(<span class="string">&quot;ğŸ±&quot;</span>, <span class="string">&quot;ğŸ°&quot;</span>, <span class="string">&quot;ğŸ¶&quot;</span>, <span class="string">&quot;ğŸ¸&quot;</span>, <span class="string">&quot;ğŸ·&quot;</span>, <span class="string">&quot;ğŸµ&quot;</span>)</span><br><span class="line">    .take(<span class="number">3</span>)</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>ğŸ±<br>ğŸ°<br>ğŸ¶<br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/take.html">http://reactivex.io/documentation/operators/take.html</a></p>
<h3 id="takeLast-ä¸takeä¸åŒçš„æ˜¯takeLastæ˜¯ä»æœ«å°¾å¼€å§‹"><a href="#takeLast-ä¸takeä¸åŒçš„æ˜¯takeLastæ˜¯ä»æœ«å°¾å¼€å§‹" class="headerlink" title="takeLast()ä¸takeä¸åŒçš„æ˜¯takeLastæ˜¯ä»æœ«å°¾å¼€å§‹"></a>takeLast()ä¸takeä¸åŒçš„æ˜¯takeLastæ˜¯ä»æœ«å°¾å¼€å§‹</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.of(<span class="string">&quot;ğŸ±&quot;</span>, <span class="string">&quot;ğŸ°&quot;</span>, <span class="string">&quot;ğŸ¶&quot;</span>, <span class="string">&quot;ğŸ¸&quot;</span>, <span class="string">&quot;ğŸ·&quot;</span>, <span class="string">&quot;ğŸµ&quot;</span>)</span><br><span class="line">    .takeLast(<span class="number">3</span>)</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>ğŸ¸<br>ğŸ·<br>ğŸµ<br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/takelast.html">http://reactivex.io/documentation/operators/takelast.html</a></p>
<h3 id="takeWhile-å‘é€ä»å¤´å¼€å§‹çš„æ»¡è¶³æ¡ä»¶çš„å…ƒç´ "><a href="#takeWhile-å‘é€ä»å¤´å¼€å§‹çš„æ»¡è¶³æ¡ä»¶çš„å…ƒç´ " class="headerlink" title="takeWhile()å‘é€ä»å¤´å¼€å§‹çš„æ»¡è¶³æ¡ä»¶çš„å…ƒç´ "></a>takeWhile()å‘é€ä»å¤´å¼€å§‹çš„æ»¡è¶³æ¡ä»¶çš„å…ƒç´ </h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">    .takeWhile &#123; <span class="variable">$0</span> <span class="operator">&lt;</span> <span class="number">4</span> &#125;</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>1<br>2<br>3<br><img src='./takeWhile.png' width=400><br><br/></p>
<h3 id="takeUntilï¼šåœ¨ä¸ä¹‹å…³è”çš„å¦ä¸€Observableå‘é€å…ƒç´ å‰å‘é€å…ƒç´ "><a href="#takeUntilï¼šåœ¨ä¸ä¹‹å…³è”çš„å¦ä¸€Observableå‘é€å…ƒç´ å‰å‘é€å…ƒç´ " class="headerlink" title="takeUntilï¼šåœ¨ä¸ä¹‹å…³è”çš„å¦ä¸€Observableå‘é€å…ƒç´ å‰å‘é€å…ƒç´ "></a>takeUntilï¼šåœ¨ä¸ä¹‹å…³è”çš„å¦ä¸€Observableå‘é€å…ƒç´ å‰å‘é€å…ƒç´ </h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sourceSequence <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"><span class="keyword">let</span> referenceSequence <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"></span><br><span class="line">sourceSequence</span><br><span class="line">    .takeUntil(referenceSequence)</span><br><span class="line">    .subscribe &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br><span class="line"></span><br><span class="line">sourceSequence.onNext(<span class="string">&quot;ğŸ±&quot;</span>)</span><br><span class="line">sourceSequence.onNext(<span class="string">&quot;ğŸ°&quot;</span>)</span><br><span class="line">sourceSequence.onNext(<span class="string">&quot;ğŸ¶&quot;</span>)</span><br><span class="line"></span><br><span class="line">referenceSequence.onNext(<span class="string">&quot;ğŸ”´&quot;</span>)</span><br><span class="line"></span><br><span class="line">sourceSequence.onNext(<span class="string">&quot;ğŸ¸&quot;</span>)</span><br><span class="line">sourceSequence.onNext(<span class="string">&quot;ğŸ·&quot;</span>)</span><br><span class="line">sourceSequence.onNext(<span class="string">&quot;ğŸµ&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>Next(ğŸ±)<br>Next(ğŸ°)<br>Next(ğŸ¶)<br>Completed<br/><br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/takeuntil.html">http://reactivex.io/documentation/operators/takeuntil.html</a></p>
<h3 id="skip-ä¸takeç›¸åï¼Œå®ƒæ˜¯ä¸å‘é€"><a href="#skip-ä¸takeç›¸åï¼Œå®ƒæ˜¯ä¸å‘é€" class="headerlink" title="skip()ä¸takeç›¸åï¼Œå®ƒæ˜¯ä¸å‘é€"></a>skip()ä¸takeç›¸åï¼Œå®ƒæ˜¯ä¸å‘é€</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.of(<span class="string">&quot;ğŸ±&quot;</span>, <span class="string">&quot;ğŸ°&quot;</span>, <span class="string">&quot;ğŸ¶&quot;</span>, <span class="string">&quot;ğŸ¸&quot;</span>, <span class="string">&quot;ğŸ·&quot;</span>, <span class="string">&quot;ğŸµ&quot;</span>)</span><br><span class="line">    .skip(<span class="number">2</span>)</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>ğŸ¶<br>ğŸ¸<br>ğŸ·<br>ğŸµ<br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/skip.html">http://reactivex.io/documentation/operators/skip.html</a></p>
<h3 id="skipWhile-ä¸takeWhileç›¸åï¼Œå®ƒæ˜¯ä¸å‘é€"><a href="#skipWhile-ä¸takeWhileç›¸åï¼Œå®ƒæ˜¯ä¸å‘é€" class="headerlink" title="skipWhile()ä¸takeWhileç›¸åï¼Œå®ƒæ˜¯ä¸å‘é€"></a>skipWhile()ä¸takeWhileç›¸åï¼Œå®ƒæ˜¯ä¸å‘é€</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">    .skipWhile &#123; <span class="variable">$0</span> <span class="operator">&lt;</span> <span class="number">4</span> &#125;</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>4<br>5<br>6<br><br/><br><img src='./skipWhile.png' width=400><br><br/></p>
<h3 id="skipWhileWithIndex-åªæ˜¯skipWhileåŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªä¸‹æ ‡index"><a href="#skipWhileWithIndex-åªæ˜¯skipWhileåŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªä¸‹æ ‡index" class="headerlink" title="skipWhileWithIndex()åªæ˜¯skipWhileåŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªä¸‹æ ‡index"></a>skipWhileWithIndex()åªæ˜¯skipWhileåŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªä¸‹æ ‡index</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.of(<span class="string">&quot;ğŸ±&quot;</span>, <span class="string">&quot;ğŸ°&quot;</span>, <span class="string">&quot;ğŸ¶&quot;</span>, <span class="string">&quot;ğŸ¸&quot;</span>, <span class="string">&quot;ğŸ·&quot;</span>, <span class="string">&quot;ğŸµ&quot;</span>)</span><br><span class="line">    .skipWhileWithIndex &#123; element, index <span class="keyword">in</span></span><br><span class="line">        index <span class="operator">&lt;</span> <span class="number">3</span></span><br><span class="line">    &#125;</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>ğŸ¸<br>ğŸ·<br>ğŸµ</p>
<h3 id="skipUntil-ä¸takeUntilç›¸åï¼Œå®ƒæ˜¯ä¹‹åå‘é€"><a href="#skipUntil-ä¸takeUntilç›¸åï¼Œå®ƒæ˜¯ä¹‹åå‘é€" class="headerlink" title="skipUntil()ä¸takeUntilç›¸åï¼Œå®ƒæ˜¯ä¹‹åå‘é€"></a>skipUntil()ä¸takeUntilç›¸åï¼Œå®ƒæ˜¯ä¹‹åå‘é€</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sourceSequence <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"><span class="keyword">let</span> referenceSequence <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"></span><br><span class="line">sourceSequence</span><br><span class="line">    .skipUntil(referenceSequence)</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br><span class="line"></span><br><span class="line">sourceSequence.onNext(<span class="string">&quot;ğŸ±&quot;</span>)</span><br><span class="line">sourceSequence.onNext(<span class="string">&quot;ğŸ°&quot;</span>)</span><br><span class="line">sourceSequence.onNext(<span class="string">&quot;ğŸ¶&quot;</span>)</span><br><span class="line"></span><br><span class="line">referenceSequence.onNext(<span class="string">&quot;ğŸ”´&quot;</span>)</span><br><span class="line"></span><br><span class="line">sourceSequence.onNext(<span class="string">&quot;ğŸ¸&quot;</span>)</span><br><span class="line">sourceSequence.onNext(<span class="string">&quot;ğŸ·&quot;</span>)</span><br><span class="line">sourceSequence.onNext(<span class="string">&quot;ğŸµ&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>ğŸ¸<br>ğŸ·<br>ğŸµ<br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/skipuntil.html">http://reactivex.io/documentation/operators/skipuntil.html</a></p>
<h2 id="å¯¹Observableå…ƒç´ åšè¿ç®—æ“ä½œ"><a href="#å¯¹Observableå…ƒç´ åšè¿ç®—æ“ä½œ" class="headerlink" title="å¯¹Observableå…ƒç´ åšè¿ç®—æ“ä½œ"></a>å¯¹Observableå…ƒç´ åšè¿ç®—æ“ä½œ</h2><h3 id="toArray-å°†Observableåºåˆ—è½¬æ¢æˆarrayå¹¶å‘é€ï¼Œç„¶åç»ˆæ­¢"><a href="#toArray-å°†Observableåºåˆ—è½¬æ¢æˆarrayå¹¶å‘é€ï¼Œç„¶åç»ˆæ­¢" class="headerlink" title="toArray()å°†Observableåºåˆ—è½¬æ¢æˆarrayå¹¶å‘é€ï¼Œç„¶åç»ˆæ­¢"></a>toArray()å°†Observableåºåˆ—è½¬æ¢æˆarrayå¹¶å‘é€ï¼Œç„¶åç»ˆæ­¢</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.range(start: <span class="number">1</span>, count: <span class="number">10</span>)</span><br><span class="line">    .toArray()</span><br><span class="line">    .subscribe &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>Next([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])<br>Completed<br><br/><br><img src='./toArray.png' width=400><br><br/></p>
<h3 id="reduce-è¿­ä»£è¿ç®—ï¼Œé€šè¿‡æŒ‡å®šåˆå§‹è¿­ä»£å€¼å’Œè¿ç®—ç¬¦"><a href="#reduce-è¿­ä»£è¿ç®—ï¼Œé€šè¿‡æŒ‡å®šåˆå§‹è¿­ä»£å€¼å’Œè¿ç®—ç¬¦" class="headerlink" title="reduce()è¿­ä»£è¿ç®—ï¼Œé€šè¿‡æŒ‡å®šåˆå§‹è¿­ä»£å€¼å’Œè¿ç®—ç¬¦"></a>reduce()è¿­ä»£è¿ç®—ï¼Œé€šè¿‡æŒ‡å®šåˆå§‹è¿­ä»£å€¼å’Œè¿ç®—ç¬¦</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="type">Observable</span>.of(<span class="number">10</span>, <span class="number">100</span>, <span class="number">1000</span>)</span><br><span class="line">    .reduce(<span class="number">1</span>, accumulator: <span class="operator">+</span>)</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code>=<br>1111<br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/reduce.html">http://reactivex.io/documentation/operators/reduce.html</a></p>
<h3 id="concat-å°†ä¸€ä¸ªObservableåºåˆ—çš„å†…éƒ¨Observableåºåˆ—ä¸²è”èµ·æ¥ï¼Œä¸”åŒä¸€æ—¶é—´åªæ“ä½œä¸€ä¸ªåºåˆ—ï¼Œåªæœ‰å½“å‰åºåˆ—Completedåï¼Œæ‰å¼€å§‹ä¸²è”ä¸‹ä¸€ä¸ªåºåˆ—çš„å‰ä¸€ä¸ªå…ƒç´ åŠä¹‹åçš„å…ƒç´ "><a href="#concat-å°†ä¸€ä¸ªObservableåºåˆ—çš„å†…éƒ¨Observableåºåˆ—ä¸²è”èµ·æ¥ï¼Œä¸”åŒä¸€æ—¶é—´åªæ“ä½œä¸€ä¸ªåºåˆ—ï¼Œåªæœ‰å½“å‰åºåˆ—Completedåï¼Œæ‰å¼€å§‹ä¸²è”ä¸‹ä¸€ä¸ªåºåˆ—çš„å‰ä¸€ä¸ªå…ƒç´ åŠä¹‹åçš„å…ƒç´ " class="headerlink" title="concat()å°†ä¸€ä¸ªObservableåºåˆ—çš„å†…éƒ¨Observableåºåˆ—ä¸²è”èµ·æ¥ï¼Œä¸”åŒä¸€æ—¶é—´åªæ“ä½œä¸€ä¸ªåºåˆ—ï¼Œåªæœ‰å½“å‰åºåˆ—Completedåï¼Œæ‰å¼€å§‹ä¸²è”ä¸‹ä¸€ä¸ªåºåˆ—çš„å‰ä¸€ä¸ªå…ƒç´ åŠä¹‹åçš„å…ƒç´ "></a>concat()å°†ä¸€ä¸ªObservableåºåˆ—çš„å†…éƒ¨Observableåºåˆ—ä¸²è”èµ·æ¥ï¼Œä¸”åŒä¸€æ—¶é—´åªæ“ä½œä¸€ä¸ªåºåˆ—ï¼Œåªæœ‰å½“å‰åºåˆ—Completedåï¼Œæ‰å¼€å§‹ä¸²è”ä¸‹ä¸€ä¸ªåºåˆ—çš„å‰ä¸€ä¸ªå…ƒç´ åŠä¹‹åçš„å…ƒç´ </h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> subject1 <span class="operator">=</span> <span class="type">BehaviorSubject</span>(value: <span class="string">&quot;ğŸ&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> subject2 <span class="operator">=</span> <span class="type">BehaviorSubject</span>(value: <span class="string">&quot;ğŸ¶&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> variable <span class="operator">=</span> <span class="type">Variable</span>(subject1)</span><br><span class="line"></span><br><span class="line">variable.asObservable()</span><br><span class="line">    .concat()</span><br><span class="line">    .subscribe &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br><span class="line"></span><br><span class="line">subject1.onNext(<span class="string">&quot;ğŸ&quot;</span>)</span><br><span class="line">subject1.onNext(<span class="string">&quot;ğŸŠ&quot;</span>)</span><br><span class="line"></span><br><span class="line">variable.value <span class="operator">=</span> subject2</span><br><span class="line"></span><br><span class="line">subject2.onNext(<span class="string">&quot;I would be ignored&quot;</span>)</span><br><span class="line">subject2.onNext(<span class="string">&quot;ğŸ±&quot;</span>)</span><br><span class="line"></span><br><span class="line">subject1.onNext(<span class="string">&quot;ğŸ¹&quot;</span>)</span><br><span class="line">subject1.onCompleted()</span><br><span class="line"></span><br><span class="line">subject2.onNext(<span class="string">&quot;ğŸ­&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>Next(ğŸ)<br>Next(ğŸ)<br>Next(ğŸŠ)<br>Next(ğŸ¹)<br>Next(ğŸ±)<br>Next(ğŸ­)<br><a target="_blank" rel="noopener" href="http://reactivex.io/documentation/operators/concat.html">http://reactivex.io/documentation/operators/concat.html</a></p>
<h2 id="Connectableæ“ä½œ"><a href="#Connectableæ“ä½œ" class="headerlink" title="Connectableæ“ä½œ"></a>Connectableæ“ä½œ</h2><p>Connectableæ“ä½œï¼ŒConnectable Observableæ“ä½œè·Ÿæ™®é€šçš„ObservableåŒºåˆ«åœ¨äºï¼ŒConnectable Observableåªæœ‰åœ¨å®ƒä»¬çš„connect()æ–¹æ³•è°ƒç”¨åæ‰å¼€å§‹å‘é€å…ƒç´ ï¼Œå› æ­¤å¯ä»¥ç­‰åˆ°æ‰€æœ‰è®¢é˜…è€…éƒ½è®¢é˜…åæ‰å¼€å§‹å‘é€å…ƒç´ ï¼Œæœ‰ç‚¹åƒäº‹åŠ¡ä¸€æ ·</p>
<h3 id="publish-å°†ä¸€ä¸ªæ™®é€šåºåˆ—è½¬æ¢æˆConnectable-Observableåºåˆ—"><a href="#publish-å°†ä¸€ä¸ªæ™®é€šåºåˆ—è½¬æ¢æˆConnectable-Observableåºåˆ—" class="headerlink" title="publish()å°†ä¸€ä¸ªæ™®é€šåºåˆ—è½¬æ¢æˆConnectable Observableåºåˆ—"></a>publish()å°†ä¸€ä¸ªæ™®é€šåºåˆ—è½¬æ¢æˆConnectable Observableåºåˆ—</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">printExampleHeader(<span class="keyword">#function</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> intSequence <span class="operator">=</span> <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.interval(<span class="number">1</span>, scheduler: <span class="type">MainScheduler</span>.instance)</span><br><span class="line">    .publish()</span><br><span class="line"></span><br><span class="line"><span class="keyword">_</span> <span class="operator">=</span> intSequence</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="string">&quot;Subscription 1:, Event: <span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>) &#125;</span><br><span class="line"></span><br><span class="line">delay(<span class="number">2</span>) &#123; intSequence.connect() &#125;</span><br><span class="line"></span><br><span class="line">delay(<span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">_</span> <span class="operator">=</span> intSequence</span><br><span class="line">        .subscribeNext &#123; <span class="built_in">print</span>(<span class="string">&quot;Subscription 2:, Event: <span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>) &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">delay(<span class="number">6</span>) &#123;</span><br><span class="line">    <span class="keyword">_</span> <span class="operator">=</span> intSequence</span><br><span class="line">        .subscribeNext &#123; <span class="built_in">print</span>(<span class="string">&quot;Subscription 3:, Event: <span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>) &#125;</span><br></pre></td></tr></table></figure>
<p><code>output:</code></p>
<p>delay 2</p>
<p>Subscription 1:, Event: 0<br>Subscription 1:, Event: 1<br>Subscription 2:, Event: 1<br>Subscription 1:, Event: 2<br>Subscription 2:, Event: 2<br>Subscription 1:, Event: 3<br>Subscription 2:, Event: 3<br>Subscription 3:, Event: 3<br>Subscription 1:, Event: 4<br>Subscription 2:, Event: 4<br>Subscription 3:, Event: 4<br><br/><br><img src='./publish.png' width=400><br><br/></p>
<h3 id="replay-ç›¸å¯¹äºpublishå¢åŠ äº†bufferSizeæŒ‡å®šå¯¹å…ƒç´ çš„ç¼“å­˜å¤§å°ï¼Œè¿™æ ·æ–°åŠ å…¥çš„è®¢é˜…è€…å¯ä»¥è·å–ç›¸åº”ä¸ªæ•°çš„å·²å‘é€çš„å…ƒç´ "><a href="#replay-ç›¸å¯¹äºpublishå¢åŠ äº†bufferSizeæŒ‡å®šå¯¹å…ƒç´ çš„ç¼“å­˜å¤§å°ï¼Œè¿™æ ·æ–°åŠ å…¥çš„è®¢é˜…è€…å¯ä»¥è·å–ç›¸åº”ä¸ªæ•°çš„å·²å‘é€çš„å…ƒç´ " class="headerlink" title="replay()ç›¸å¯¹äºpublishå¢åŠ äº†bufferSizeæŒ‡å®šå¯¹å…ƒç´ çš„ç¼“å­˜å¤§å°ï¼Œè¿™æ ·æ–°åŠ å…¥çš„è®¢é˜…è€…å¯ä»¥è·å–ç›¸åº”ä¸ªæ•°çš„å·²å‘é€çš„å…ƒç´ "></a>replay()ç›¸å¯¹äºpublishå¢åŠ äº†bufferSizeæŒ‡å®šå¯¹å…ƒç´ çš„ç¼“å­˜å¤§å°ï¼Œè¿™æ ·æ–°åŠ å…¥çš„è®¢é˜…è€…å¯ä»¥è·å–ç›¸åº”ä¸ªæ•°çš„å·²å‘é€çš„å…ƒç´ </h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">printExampleHeader(<span class="keyword">#function</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> intSequence <span class="operator">=</span> <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.interval(<span class="number">1</span>, scheduler: <span class="type">MainScheduler</span>.instance)</span><br><span class="line">    .replay(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">_</span> <span class="operator">=</span> intSequence</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="string">&quot;Subscription 1:, Event: <span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>) &#125;</span><br><span class="line"></span><br><span class="line">delay(<span class="number">2</span>) &#123; intSequence.connect() &#125;</span><br><span class="line"></span><br><span class="line">delay(<span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">_</span> <span class="operator">=</span> intSequence</span><br><span class="line">        .subscribeNext &#123; <span class="built_in">print</span>(<span class="string">&quot;Subscription 2:, Event: <span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">delay(<span class="number">8</span>) &#123;</span><br><span class="line">    <span class="keyword">_</span> <span class="operator">=</span> intSequence</span><br><span class="line">        .subscribeNext &#123; <span class="built_in">print</span>(<span class="string">&quot;Subscription 3:, Event: <span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>output:</code></p>
<p>delay 2</p>
<p>Subscription 1:, Event: 0<br>Subscription 2:, Event: 0<br>Subscription 1:, Event: 1<br>Subscription 2:, Event: 1<br>Subscription 1:, Event: 2<br>Subscription 2:, Event: 2<br>Subscription 1:, Event: 3<br>Subscription 2:, Event: 3<br>Subscription 1:, Event: 4<br>Subscription 2:, Event: 4<br>Subscription 3:, Event: 0<br>Subscription 3:, Event: 1<br>Subscription 3:, Event: 2<br>Subscription 3:, Event: 3<br>Subscription 3:, Event: 4<br>Subscription 1:, Event: 5<br>Subscription 2:, Event: 5<br>Subscription 3:, Event: 5<br><br/><br><img src='./replay.png' width=400><br><br/></p>
<h3 id="multicast-éœ€è¦ä¼ å…¥ä¸€ä¸ªsubjectï¼Œé€šè¿‡subjectæ¥ç®¡ç†å‘è®¢é˜…è€…å‘é€æ¶ˆæ¯"><a href="#multicast-éœ€è¦ä¼ å…¥ä¸€ä¸ªsubjectï¼Œé€šè¿‡subjectæ¥ç®¡ç†å‘è®¢é˜…è€…å‘é€æ¶ˆæ¯" class="headerlink" title="multicast()éœ€è¦ä¼ å…¥ä¸€ä¸ªsubjectï¼Œé€šè¿‡subjectæ¥ç®¡ç†å‘è®¢é˜…è€…å‘é€æ¶ˆæ¯"></a>multicast()éœ€è¦ä¼ å…¥ä¸€ä¸ªsubjectï¼Œé€šè¿‡subjectæ¥ç®¡ç†å‘è®¢é˜…è€…å‘é€æ¶ˆæ¯</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">printExampleHeader(<span class="keyword">#function</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> subject <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line"></span><br><span class="line"><span class="keyword">_</span> <span class="operator">=</span> subject</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="string">&quot;Subject: <span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>) &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> intSequence <span class="operator">=</span> <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.interval(<span class="number">1</span>, scheduler: <span class="type">MainScheduler</span>.instance)</span><br><span class="line">    .multicast(subject)</span><br><span class="line"></span><br><span class="line"><span class="keyword">_</span> <span class="operator">=</span> intSequence</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\t</span>Subscription 1:, Event: <span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>) &#125;</span><br><span class="line"></span><br><span class="line">delay(<span class="number">2</span>) &#123; intSequence.connect() &#125;</span><br><span class="line"></span><br><span class="line">delay(<span class="number">4</span>) &#123;</span><br><span class="line">     <span class="keyword">_</span> <span class="operator">=</span> intSequence</span><br><span class="line">        .subscribeNext &#123; <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\t</span>Subscription 2:, Event: <span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">delay(<span class="number">6</span>) &#123;</span><br><span class="line">     <span class="keyword">_</span> <span class="operator">=</span> intSequence</span><br><span class="line">        .subscribeNext &#123; <span class="built_in">print</span>(<span class="string">&quot;<span class="subst">\t</span>Subscription 3:, Event: <span class="subst">\(<span class="variable">$0</span>)</span>&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>output:</code></p>
<p>delay 2</p>
<p>Subject: 0<br>Subscription 1:, Event: 0<br> Subject: 1<br>Subscription 1:, Event: 1<br>Subscription 2:, Event: 1<br> Subject: 2<br>Subscription 1:, Event: 2<br>Subscription 2:, Event: 2<br> Subject: 3<br>Subscription 1:, Event: 3<br>Subscription 2:, Event: 3<br>Subscription 3:, Event: 3<br> Subject: 4<br>Subscription 1:, Event: 4<br>Subscription 2:, Event: 4<br>Subscription 3:, Event: 4<br> Subject: 5<br>Subscription 1:, Event: 5<br>Subscription 2:, Event: 5<br>Subscription 3:, Event: 5</p>
<h2 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h2><h3 id="catchErrorJustReturn-é€šè¿‡è¿”å›ä¸€ä¸ªåªå‘é€ä¸€ä¸ªå…ƒç´ çš„Observableåºåˆ—æ¥æ•è·é”™è¯¯ä¿¡æ¯ï¼Œç„¶å-Completed"><a href="#catchErrorJustReturn-é€šè¿‡è¿”å›ä¸€ä¸ªåªå‘é€ä¸€ä¸ªå…ƒç´ çš„Observableåºåˆ—æ¥æ•è·é”™è¯¯ä¿¡æ¯ï¼Œç„¶å-Completed" class="headerlink" title="catchErrorJustReturn()é€šè¿‡è¿”å›ä¸€ä¸ªåªå‘é€ä¸€ä¸ªå…ƒç´ çš„Observableåºåˆ—æ¥æ•è·é”™è¯¯ä¿¡æ¯ï¼Œç„¶å Completed"></a>catchErrorJustReturn()é€šè¿‡è¿”å›ä¸€ä¸ªåªå‘é€ä¸€ä¸ªå…ƒç´ çš„Observableåºåˆ—æ¥æ•è·é”™è¯¯ä¿¡æ¯ï¼Œç„¶å Completed</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sequenceThatFails <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"></span><br><span class="line">sequenceThatFails</span><br><span class="line">    .catchErrorJustReturn(<span class="string">&quot;ğŸ˜Š&quot;</span>)</span><br><span class="line">    .subscribe &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br><span class="line"></span><br><span class="line">sequenceThatFails.onNext(<span class="string">&quot;ğŸ˜¬&quot;</span>)</span><br><span class="line">sequenceThatFails.onNext(<span class="string">&quot;ğŸ˜¨&quot;</span>)</span><br><span class="line">sequenceThatFails.onNext(<span class="string">&quot;ğŸ˜¡&quot;</span>)</span><br><span class="line">sequenceThatFails.onNext(<span class="string">&quot;ğŸ”´&quot;</span>)</span><br><span class="line">sequenceThatFails.onError(<span class="type">Error</span>.<span class="type">Test</span>)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>Next(ğŸ˜¬)<br>Next(ğŸ˜¨)<br>Next(ğŸ˜¡)<br>Next(ğŸ”´)<br>Next(ğŸ˜Š)<br>Completed</p>
<h3 id="catchError-å½“æ•è·é”™è¯¯åä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„Observableåºåˆ—ä¸ä¹‹åˆå¹¶"><a href="#catchError-å½“æ•è·é”™è¯¯åä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„Observableåºåˆ—ä¸ä¹‹åˆå¹¶" class="headerlink" title="catchError()å½“æ•è·é”™è¯¯åä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„Observableåºåˆ—ä¸ä¹‹åˆå¹¶"></a>catchError()å½“æ•è·é”™è¯¯åä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„Observableåºåˆ—ä¸ä¹‹åˆå¹¶</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sequenceThatErrors <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"><span class="keyword">let</span> recoverySequence <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"></span><br><span class="line">sequenceThatErrors</span><br><span class="line">    .catchError &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Error:&quot;</span>, <span class="variable">$0</span>)</span><br><span class="line">        <span class="keyword">return</span> recoverySequence</span><br><span class="line">    &#125;</span><br><span class="line">    .subscribe &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br><span class="line"></span><br><span class="line">sequenceThatErrors.onNext(<span class="string">&quot;ğŸ˜¬&quot;</span>)</span><br><span class="line">sequenceThatErrors.onNext(<span class="string">&quot;ğŸ˜¨&quot;</span>)</span><br><span class="line">sequenceThatErrors.onNext(<span class="string">&quot;ğŸ˜¡&quot;</span>)</span><br><span class="line">sequenceThatErrors.onNext(<span class="string">&quot;ğŸ”´&quot;</span>)</span><br><span class="line">sequenceThatErrors.onError(<span class="type">Error</span>.<span class="type">Test</span>)</span><br><span class="line"></span><br><span class="line">recoverySequence.onNext(<span class="string">&quot;ğŸ˜Š&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>Next(ğŸ˜¬)<br>Next(ğŸ˜¨)<br>Next(ğŸ˜¡)<br>Next(ğŸ”´)<br>Error: Test<br>Next(ğŸ˜Š)<br><br/><br><img src='./catch.png' width=400><br><br/></p>
<h3 id="retry-å½“é‡åˆ°erroråå‘é€ä¸€æ¡erroræ¶ˆæ¯ç„¶åé‡æ–°é‡å¤´å‘é€å…ƒç´ ï¼Œé€šè¿‡ä¼ å…¥ä¸€ä¸ªæ•´æ•°å¯ä»¥æŒ‡å®šé‡å¤æ¬¡æ•°"><a href="#retry-å½“é‡åˆ°erroråå‘é€ä¸€æ¡erroræ¶ˆæ¯ç„¶åé‡æ–°é‡å¤´å‘é€å…ƒç´ ï¼Œé€šè¿‡ä¼ å…¥ä¸€ä¸ªæ•´æ•°å¯ä»¥æŒ‡å®šé‡å¤æ¬¡æ•°" class="headerlink" title="retry()å½“é‡åˆ°erroråå‘é€ä¸€æ¡erroræ¶ˆæ¯ç„¶åé‡æ–°é‡å¤´å‘é€å…ƒç´ ï¼Œé€šè¿‡ä¼ å…¥ä¸€ä¸ªæ•´æ•°å¯ä»¥æŒ‡å®šé‡å¤æ¬¡æ•°"></a>retry()å½“é‡åˆ°erroråå‘é€ä¸€æ¡erroræ¶ˆæ¯ç„¶åé‡æ–°é‡å¤´å‘é€å…ƒç´ ï¼Œé€šè¿‡ä¼ å…¥ä¸€ä¸ªæ•´æ•°å¯ä»¥æŒ‡å®šé‡å¤æ¬¡æ•°</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line">    <span class="keyword">var</span> count <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sequenceThatErrors <span class="operator">=</span> <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; observer <span class="keyword">in</span></span><br><span class="line">    observer.onNext(<span class="string">&quot;ğŸ&quot;</span>)</span><br><span class="line">    observer.onNext(<span class="string">&quot;ğŸ&quot;</span>)</span><br><span class="line">    observer.onNext(<span class="string">&quot;ğŸŠ&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> count <span class="operator">==</span> <span class="number">1</span> &#123;</span><br><span class="line">        observer.onError(<span class="type">Error</span>.<span class="type">Test</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Error encountered&quot;</span>)</span><br><span class="line">        count <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    observer.onNext(<span class="string">&quot;ğŸ¶&quot;</span>)</span><br><span class="line">    observer.onNext(<span class="string">&quot;ğŸ±&quot;</span>)</span><br><span class="line">    observer.onNext(<span class="string">&quot;ğŸ­&quot;</span>)</span><br><span class="line">    observer.onCompleted()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="type">NopDisposable</span>.instance</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sequenceThatErrors</span><br><span class="line">    .retry()</span><br><span class="line">    .subscribeNext &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .addDisposableTo(disposeBag)</span><br></pre></td></tr></table></figure>
<p><code>output:</code><br>ğŸ<br>ğŸ<br>ğŸŠ<br>Error encountered<br>ğŸ<br>ğŸ<br>ğŸŠ<br>ğŸ¶<br>ğŸ±<br>ğŸ­<br><br/><br><img src='./retry.png' width=400><br><br/></p>
<h2 id="debug"><a href="#debug" class="headerlink" title="debug"></a>debug</h2><ol>
<li>debug()ä¼šæ‰“å°è¯¦ç»†çš„ä¿¡æ¯</li>
<li>RxSwift.resourceCount()æ‰“å°èµ„æºåˆ†é…è®¡æ•°</li>
</ol>
<blockquote>
<p>æ³¨ï¼šä¸è¦åœ¨Release buildsä¸­ä½¿ç”¨</p>
</blockquote>

    </div>
  </article>

  <ul class="post-pager">
    
    <li class="previous">
      <a href="/posts/2d244d693a41ec5f.html">â† Previous Post</a>
    </li>
    
    
    <li class="next">
      <a href="/posts/43b7e269337d814b.html">Next Post â†’</a>
    </li>
    
  </ul>

  <div class="box-section shadow box-comment">
    <!-- 
  <section class="disqus-comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>

  <script>
    var disqus_shortname = 'jvaeyhcd';
    
    var disqus_url = 'https://jvaeyhcd.github.io/posts/1cdda3c06a430c09.html';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script id="dsq-count-scr" src="//jvaeyhcd.disqus.com/count.js" async></script>


 -->
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<div id="gitalk-container"></div>
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: '29d526fe1e0f29d6b28c',
        clientSecret: '1e5c674f3cbce0ba7d19045138d69ef800d5bd21',
        id: window.location.pathname,
        repo: 'jvaeyhcd.github.io',
        owner: 'Jvaeyhcd',
        admin: 'Jvaeyhcd'
    })
    gitalk.render('gitalk-container')
</script>
  </div>
</div>
      </div>
    </div>
  </div>
  <div class="layout-footer">
    <div id="bottom-outer" class="container">
  <div id="bottom-inner">
    <span>
    &copy; 2016-2022 Jvaeyhcd using
    <a style="color:#007fff;" target="_blank" rel="noopener" href="http://hexo.io">Hexo</a>.
    </span>
    
      <div class="busuanzi-box">
        <!-- ä¸è’œå­ç»Ÿè®¡ -->
        <span id="busuanzi_container_site_pv">
                æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
        </span>
        <span class="post-meta-divider">|</span>
        <span id="busuanzi_container_site_uv" style='display:none'>
                æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äºº
        </span>
      </div>
    
    <a class="footer-icon" target="_blank" rel="noopener" href="https://github.com/Jvaeyhcd"><i class="fab fa-github"></i></a>
  </div>
</div>
<link href="https://unpkg.com/ionicons@4.5.10-0/dist/css/ionicons.min.css" rel="stylesheet">
<button id="totop" class="back-top">
  <i class="icon ion-md-arrow-dropup"></i>
</button>

<script src="//code.jquery.com/jquery-2.0.3.min.js"></script>
<script src="/js/back-top.js"></script>

  </div>
</div>



  <!-- scripts list from theme config.yml -->
  
    <script src="/js/dexo.js"></script>
  
    <script src="/js/helper.js"></script>
  


</body>
</html>
